/*!
 * fonoApi v1.0.0 (https://fonoapi.freshpixl.com/)
 * Author : @shakee93
 * Licensed under the MIT license
 */
"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,n,o){var i={init:function(e,n){var o=this;o.elem=n,o.$elem=t(n),"string"==typeof e?o.device=e:(o.device=e.device,o.brand=e.brand,o.position=e.position),o.options=t.extend({},t.fn.fonoApi.options,e),null==o.options.token&&console.error("Token Missing. Generate a Token at fonoapi.freshpixl.com"),o.refresh()},refresh:function(){var t=this;t.fetch().done(function(e){if(e.status)"function"==typeof t.options.onFailed?t.options.onFailed.apply(t.elem,arguments):t.displayError(e);else{if(e=t.limit(e,t.options.limit),"function"==typeof t.options.template){var n=t.options.template.apply(t.elem,e);t.setTemplate(n)}else t.setDefaultTemplate(e);t.display()}"function"==typeof t.options.onComplete&&t.options.onComplete.apply(t.elem,arguments)}).fail(function(e,n){console.log(e),"function"==typeof t.options.onFailed?t.options.onFailed.apply(t.elem,arguments):t.displayError(n)})},fetch:function(){return t.ajax({url:this.options.url,data:{token:this.options.token,device:this.device,brand:this.brand,position:self.position},dataType:"json"})},setDefaultTemplate:function(e){var n=this;n.devices=t.map(e,function(e,n){content="<h3>"+e.DeviceName+"</h3>",content+='<table class="table table-striped" style="width:100%">',content+="<tr><th>info</th><th>Description</th></tr>";for(var o in e)content+="<tr><td>"+o+"</td><td>"+e[o]+"</td><tr>";return content+="</table>",t('<div class="table-responsive"></div>').append(content)})},setTemplate:function(t){var e=this;e.devices=t},display:function(){var t=this;"function"==typeof t.options.onDisplay&&t.options.onDisplay.apply(t.elem,arguments),this.$elem.html(this.devices)},limit:function(t,e){return t.slice(0,e)},displayError:function(e){e.status?this.$elem.html(t("<span></span>").append(e.message+"<br>")):this.$elem.html(e)}};t.fn.fonoApi=function(e){return this.each(function(){var n=Object.create(i);n.init(e,this),t.data(this,"fonoApi",n)})},t.fn.fonoApi.options={url:"https://fonoapi.freshpixl.com/v1/getdevice",token:null,limit:5,onComplete:null,onFailed:null,onDisplay:null,template:null}}(jQuery,window,document);